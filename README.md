# Youtube_Analyzer_ver_prot
最近の動画の傾向などを分析をしたいYoutuberを分析をすることができます。
検索欄から、分析をしたいyoutuberを入力をして後に検索をかけると裏のほうで、入力されたキーワードを持ってきてserchメソッドが動き探索をかけます。このとき、youtube dataから持ってくるものは「チャンネルアイコン画像がURL・名前(title)・チャンネルID（重要）」でそれらを１０件候補としてページを更新して、テーブル表示をする。
アイコン部分がクリックできるようになっており、メインのクリックしたチャンネルの分析ページの処理にうつる。この時は、チャンネルIDと名前はクエリパラメータとして保持をする。
分析処理のほうでは、チャンネルIDをもとにプロフィール情報の取り出しと新着５０件分の動画情報を取り出す。
プロフィール情報は、チャンネル名、動画のアップロード数、登録者数、総再生数、チャンネルの作成日時を取ってくるにしてそのままフロント側でテーブル表示をする。
動画情報は、サムネイル、タイトル、再生数、高評価数、投稿日時を取るようにしてpandasでデータフレームにする。その後フロンド側で、グラフ描画ライブラリのChartJSを使い再生数・高評価数・再生数と高評価数の二軸・投稿時間のグラフが表示をされるようになり、下にいくと動画時間の平均値、中央値、動画投稿頻度を出す。
最後に、データフレームにして動画情報をテーブル表示できるようにしている。サムネイルをクリックすればその動画のYoutubeページにいくようになっている
今後は、投稿頻度も中央値と平均値を出すようにすることデータベースも組み込んでみることをしようと考えている。


きっかけは、webアプリケーションの教材でやったことをアウトプットしようとしたことでどうせ作るのであれば教材のクローンではなく、今まで誰も同じようなものは作ったことがないものとはいかなくても少しオリジナリティが出るものを作ろうと思った。
最初に浮かんだのが、Youtube関連だったのでそこから開発構想を考えてくようになりました。実際のYoutubeページからスクレイピングを考えていたがYoutube Data APIで直接データをもってこれることを知ったのでAPIを使って分析データを取り出す方向にしました。

まずは、APIの使い方をみるために公式ドキュメントや使い方を記事にしている人たちのコードを見様見真似で書いて構造を理解して、適宜修正を加えていくようにした。
ある程度使い方が分かってきたら、Flaskと組み合わせてweb上に表示をしてくようにした、想像をしていた表示が出ないこともあったので、そこからはフロント側での修正が多かったです。グラフを絶対に出したかったので勉強の芋も込めてあまり触ったことのないjavascriptライブラリのChartJSを使った。あまり知らずに最新バージョンを使ったのでドキュメントを見ながらのコーディングはかなり時間を要しました。
ChartJSの扱いを把握していくのが、一番つらかったですがその次につらかったのが、最初の分析候補を探すときの各チャンネルのチャンネルアイコンが画像ファイルでなく画像が置いてあるURLだったのでそこから画像を自動DLしてコード内に保存をするのが調べても中々見つからず苦戦したことです。chatgptにも頼ったりして何とか実装はできました。思えば、コードを書いている時間よりも考えたり調べたり時間のほうが圧倒的に多かったです。
現在は、無料レンタルサーバのPythonanyWhereを使ってプロトタイプをデプロイしていますが、授業や課題の合間に時間があれば改修をしていきたいです。

現在のプロトタイプの課題一覧ーーーーーーーーーーーーーーーーーーーーー
課題①
本当は、Youtube Data apiで取得する件数は全部又は指定した数だけ取得したいですが、apiのクォータ量の制限やアクセス時間の延長化、そして、ネックなのがchannelidからvideoidを多く取得をしようとしたときに同じvideoidを取得してまうことである。これは、videoidをしたときに処理中に入手したvideoidリストを参照して同じvideoidがあればリストに追加をしないようにすれば解決しますが、最初から同じvideoidが持ってこないにする方法を模索している。
課題①の解決案（仮）
channleidからさらにアップロード動画のplaylistを持ってくる。もしかしたら、playlistの方では同じvideoidを入手しないようにできるかもしれないから試してみる。
--------------------------------------------------------------------------------
課題②
動画情報の取り出しの時には、動画によっては高評価数を非公開にしているものがあるのでエラーが出てしまった。プロトタイプの段階ではtryメソッドで高評価数が入手ができなかったときは0を格納するようにしているが0にしているだけじゃなんか味気ない感じがする。
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

感想
本当は、低評価数も持ってこれたら高評価数との比較で動画のアンチ度みたいなのを実装したかったがYoutubeの取り扱いで低評価がなくなったのでできなったのが悲しい。

Youtubeから情報をとってくる必要があったため、Youtube Data APIを複数利用をしています。
Pythonをサーバーサイドとして使ったのは、一番使い慣れているのでコードが書きやすく、ライブラリが豊富であったため。実際、コーディング中に思いついた機能が出たときには、必要なメソッドやライブラリがpythonではすぐ見つかって使いやすかった。ただ、値の型定義を行わなくよいことがコードが長くなっていくにつれて扱う値の型が分からなくなってくることもあったりした。
グラフを実装するときの、chartJSはjavascriptライブラリを扱ってみたかったから
